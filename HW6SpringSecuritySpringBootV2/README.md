# HW6SpringSecuritySpringBootV2

## Пример использования Spring Security с версией Spring Boot 2.7.14

_На основе проекта HW3SimpleThymeleaf_

**_Зависимости в проекте_**:

* Spring Web
* Spring Security
* Thymeleaf
* Thymeleaf Extras Springsecurity5
* Lombok

**_В приложении используется 3 роли_**:

1. **Admin**

   Login: admin<br>
   Password: password
2. **Worker**

   Login: cook<br>
   Password: password
3. **User**

   Login: user<br>
   Password: password

**_Настройки доступа к страницам сайта_**:

* [home: /](http://localhost:8080/) - домашняя страница, доступна всем

  Если пользователь не зарегистрирован, он увидит только кнопку "Войти". <br>
  Иначе - кнопки "Склад пищевых продуктов" и "Выйти".
* [/login](http://localhost:8080/login) - форма регистрации

  При попытке зайти на другие страницы (кроме домашней) или при нажатии на кнопку
  "Войти" пользователь автоматически перенаправляется на страницу для регистрации. <br>
  После успешной регистрации пользователь попадает на запрашиваемую ранее страницу, если имеет
  к ней доступ, либо на домашнюю страницу при регистрации с нее или со страницы отказа в доступе.<br>
  Если пользователь вводит некорректные данные, то переходит по ссылке
  [/login?error](http://localhost:8080/login?error) и видит на странице соответствующую запись.
* [/products](http://localhost:8080/products) - страница со списком продуктов, только для
  зарегистрированных пользователей

  На странице всем доступны кнопки "Главная страница" и "Выйти". Кнопка "Добавить продукт"
  появляется только у админа. Можно перейти по ссылке на страницу группы продуктов
  (у user нет доступа).
* [/products/food-group?name=Овощи](http://localhost:8080/products/food-group?name=Овощи) -
  просмотр информации о группе продуктов, может зайти только worker и admin

  Здесь можно просмотреть информацию или "Вернуться к списку продуктов".
* [/products/add](http://localhost:8080/products/add) - форма для добавления продукта,
  доступна только для admin

  Здесь можно "Добавить продукт" и "Вернуться к списку продуктов".
* [/process-login (POST)](http://localhost:8080/process-login) - проверка учетных
  данных в SpringSecurity, автоматическое перенаправление с формы регистрации
* [/errors/403](http://localhost:8080/errors/403) - страница отказа в доступе

  Автоматическое перенаправление при отсутствии доступа к запрашиваемой странице.
  Если до этого пользователь был на странице регистрации и не имеет доступ к запрашиваемой
  странице, то увидит только кнопку "Войти". Если его перенаправило сюда с другой доступной
  страницы, то будет видна кнопка "Вернуться на предыдущую страницу".
* [/home-logout (POST)](http://localhost:8080/home-logout) - выход из сессии

  При нажатии кнопки "Выход" пользователя автоматически перебрасывает на данную страницу,
  после чего он попадает на домашнюю страницу.
